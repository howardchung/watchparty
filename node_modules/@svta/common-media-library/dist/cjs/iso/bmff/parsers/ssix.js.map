{"version":3,"file":"ssix.js","sourceRoot":"","sources":["../../../../../src/iso/bmff/parsers/ssix.ts"],"names":[],"mappings":";;AAkDA,oBAkBC;AA7BD;;;;;;;;;;GAUG;AACH,SAAgB,IAAI,CAAC,IAAa;IACjC,MAAM,EAAE,OAAO,EAAE,KAAK,EAAE,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;IAC9C,MAAM,eAAe,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;IACzC,MAAM,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,eAAe,EAAE,GAAG,EAAE;QAC1D,MAAM,WAAW,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;QACrC,MAAM,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC,WAAW,EAAE,GAAG,EAAE,CAAC,CAAC;YACnD,KAAK,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;YACvB,SAAS,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;SAC3B,CAAC,CAAC,CAAC;QACJ,OAAO,EAAE,WAAW,EAAE,MAAM,EAAE,CAAC;IAChC,CAAC,CAAC,CAAC;IAEH,OAAO;QACN,OAAO;QACP,KAAK;QACL,eAAe;QACf,WAAW;KACX,CAAC;AACH,CAAC;AAAA,CAAC","sourcesContent":["import type { FullBox } from '../FullBox.js';\nimport type { IsoView } from '../IsoView.js';\n\n/**\n * Subsegment range\n *\n * @group ISOBMFF\n *\n * @beta\n */\nexport type Range = {\n\tlevel: number;\n\trangeSize: number;\n};\n\n/**\n * Subsegment\n *\n * @group ISOBMFF\n *\n * @beta\n */\nexport type Subsegment = {\n\trangesCount: number;\n\tranges: Range[];\n};\n\n/**\n * ISO/IEC 14496-12:2012 - 8.16.4 Subsegment Index Box\n *\n * @group ISOBMFF\n *\n * @beta\n */\nexport type SubsegmentIndexBox = FullBox & {\n\tsubsegmentCount: number;\n\tsubsegments: Subsegment[];\n};\n\n/**\n * Parse a SubsegmentIndexBox from an IsoView\n *\n * @param view - The IsoView to read data from\n *\n * @returns A parsed SubsegmentIndexBox\n *\n * @group ISOBMFF\n *\n * @beta\n */\nexport function ssix(view: IsoView): SubsegmentIndexBox {\n\tconst { version, flags } = view.readFullBox();\n\tconst subsegmentCount = view.readUint(4);\n\tconst subsegments = view.readEntries(subsegmentCount, () => {\n\t\tconst rangesCount = view.readUint(4);\n\t\tconst ranges = view.readEntries(rangesCount, () => ({\n\t\t\tlevel: view.readUint(1),\n\t\t\trangeSize: view.readUint(3),\n\t\t}));\n\t\treturn { rangesCount, ranges };\n\t});\n\n\treturn {\n\t\tversion,\n\t\tflags,\n\t\tsubsegmentCount,\n\t\tsubsegments,\n\t};\n};\n"]}