{"version":3,"file":"emsg.js","sourceRoot":"","sources":["../../../../../src/iso/bmff/parsers/emsg.ts"],"names":[],"mappings":";;AAgCA,oBAyBC;AApCD;;;;;;;;;;GAUG;AACH,SAAgB,IAAI,CAAC,IAAa;IACjC,MAAM,EAAE,QAAQ,EAAE,UAAU,EAAE,QAAQ,EAAE,GAAG,IAAI,CAAC;IAEhD,MAAM,MAAM,GAAG,EAAE,GAAG,IAAI,CAAC,WAAW,EAAE,EAAqB,CAAC;IAE5D,IAAI,MAAM,CAAC,OAAO,IAAI,CAAC,EAAE,CAAC;QACzB,MAAM,CAAC,SAAS,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC;QAC/B,MAAM,CAAC,gBAAgB,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC;QACtC,MAAM,CAAC,aAAa,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC;QACnC,MAAM,CAAC,EAAE,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC;QACxB,MAAM,CAAC,WAAW,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;QACpC,MAAM,CAAC,KAAK,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;IAC/B,CAAC;SACI,CAAC;QACL,MAAM,CAAC,WAAW,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;QACpC,MAAM,CAAC,KAAK,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;QAC9B,MAAM,CAAC,SAAS,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC;QAC/B,MAAM,CAAC,qBAAqB,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC;QAC3C,MAAM,CAAC,aAAa,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC;QACnC,MAAM,CAAC,EAAE,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC;IACzB,CAAC;IAED,MAAM,CAAC,WAAW,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;IAElC,OAAO,MAAM,CAAC;AACf,CAAC","sourcesContent":["import type { FullBox } from '../FullBox.js';\nimport type { IsoView } from '../IsoView.js';\n\n/**\n * ISO/IEC 23009-1:2014 - 5.10.3.3 Event Message Box\n *\n * @group ISOBMFF\n *\n * @beta\n */\nexport type EventMessageBox = FullBox & {\n\tschemeIdUri: string,\n\tvalue: string,\n\ttimescale: number,\n\tpresentationTime: number,\n\tpresentationTimeDelta: number,\n\teventDuration: number,\n\tid: number,\n\tmessageData: Uint8Array,\n};\n\n/**\n * Parse an EventMessageBox from an IsoView\n *\n * @param view - The IsoView to read data from\n *\n * @returns A parsed EventMessageBox\n *\n * @group ISOBMFF\n *\n * @beta\n */\nexport function emsg(view: IsoView): EventMessageBox {\n\tconst { readUint, readString, readData } = view;\n\n\tconst result = { ...view.readFullBox() } as EventMessageBox;\n\n\tif (result.version == 1) {\n\t\tresult.timescale = readUint(4);\n\t\tresult.presentationTime = readUint(8);\n\t\tresult.eventDuration = readUint(4);\n\t\tresult.id = readUint(4);\n\t\tresult.schemeIdUri = readString(-1);\n\t\tresult.value = readString(-1);\n\t}\n\telse {\n\t\tresult.schemeIdUri = readString(-1);\n\t\tresult.value = readString(-1);\n\t\tresult.timescale = readUint(4);\n\t\tresult.presentationTimeDelta = readUint(4);\n\t\tresult.eventDuration = readUint(4);\n\t\tresult.id = readUint(4);\n\t}\n\n\tresult.messageData = readData(-1);\n\n\treturn result;\n}\n"]}