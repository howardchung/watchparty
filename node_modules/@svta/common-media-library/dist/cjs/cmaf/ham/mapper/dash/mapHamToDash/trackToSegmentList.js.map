{"version":3,"file":"trackToSegmentList.js","sourceRoot":"","sources":["../../../../../../../src/cmaf/ham/mapper/dash/mapHamToDash/trackToSegmentList.ts"],"names":[],"mappings":";;AAOA,gDA0BC;AA5BD,6DAAuD;AAEvD,SAAgB,kBAAkB,CAAC,KAAY;;IAC9C,MAAM,WAAW,GAAkB,EAAE,CAAC;IACtC,MAAM,WAAW,GAAiB,EAAE,CAAC;IACrC,KAAK,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,OAAO,EAAE,EAAE;QAClC,WAAW,CAAC,IAAI,CAAC;YAChB,CAAC,EAAE;gBACF,KAAK,EAAE,OAAO,CAAC,GAAG;aAClB;SACD,CAAC,CAAC;IACJ,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,CAAA,MAAA,KAAK,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC,0CAAE,SAAS,CAAA,EAAE,CAAC;QACtC,MAAM,SAAS,GAAG,IAAA,8BAAY,EAAC,KAAK,CAAC,CAAC;QACtC,WAAW,CAAC,IAAI,CAAC;YAChB,CAAC,EAAE;gBACF,QAAQ,EAAE,CACT,CAAC,KAAK,CAAC,QAAQ,GAAG,SAAS,CAAC;oBAC5B,WAAW,CAAC,MAAM,CAClB,CAAC,QAAQ,EAAE;gBACZ,SAAS,EAAE,SAAS,CAAC,QAAQ,EAAE;aAC/B;YACD,cAAc,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,SAAS,EAAE,KAAK,CAAC,iBAAiB,EAAE,EAAE,CAAC;YAC/D,UAAU,EAAE,WAAW;SACR,CAAC,CAAC;IACnB,CAAC;IACD,OAAO,WAAW,CAAC;AACpB,CAAC","sourcesContent":["import type { Track } from '../../../types/model/Track.js';\n\nimport type { SegmentList } from '../../../types/mapper/dash/SegmentList.js';\nimport type { SegmentURL } from '../../../types/mapper/dash/SegmentUrl.js';\n\nimport { getTimescale } from './utils/getTimescale.js';\n\nexport function trackToSegmentList(track: Track): SegmentList[] {\n\tconst segmentList: SegmentList[] = [];\n\tconst segmentURLs: SegmentURL[] = [];\n\ttrack.segments.forEach((segment) => {\n\t\tsegmentURLs.push({\n\t\t\t$: {\n\t\t\t\tmedia: segment.url,\n\t\t\t},\n\t\t});\n\t});\n\n\tif (!track.segments.at(0)?.byteRange) {\n\t\tconst timescale = getTimescale(track);\n\t\tsegmentList.push({\n\t\t\t$: {\n\t\t\t\tduration: (\n\t\t\t\t\t(track.duration * timescale) /\n\t\t\t\t\tsegmentURLs.length\n\t\t\t\t).toString(),\n\t\t\t\ttimescale: timescale.toString(),\n\t\t\t},\n\t\t\tInitialization: [{ $: { sourceURL: track.urlInitialization } }],\n\t\t\tSegmentURL: segmentURLs,\n\t\t} as SegmentList);\n\t}\n\treturn segmentList;\n}\n"]}