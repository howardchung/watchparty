{"version":3,"file":"validateSegment.js","sourceRoot":"","sources":["../../../../../../src/cmaf/ham/services/validators/validateSegment.ts"],"names":[],"mappings":";;AAkBA,0CA4BC;AA3CD;;;;;;;;;;;;;;GAcG;AACH,SAAgB,eAAe,CAC9B,OAAgB,EAChB,OAAgB,EAChB,cAA2B;IAE3B,MAAM,UAAU,GAAe,cAAc,aAAd,cAAc,cAAd,cAAc,GAAI;QAChD,MAAM,EAAE,IAAI;QACZ,aAAa,EAAE,EAAE;KACjB,CAAC;IACF,MAAM,eAAe,GAAG,OAAO;QAC9B,CAAC,CAAC,2BAA2B,OAAO,EAAE;QACtC,CAAC,CAAC,GAAG,CAAC;IAEP,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC;QACvB,UAAU,CAAC,MAAM,GAAG,KAAK,CAAC;QAC1B,UAAU,CAAC,aAAa,CAAC,IAAI,CAC5B,gCAAgC,eAAe,EAAE,CACjD,CAAC;IACH,CAAC;IAED,IAAI,CAAC,OAAO,CAAC,GAAG,EAAE,CAAC;QAClB,UAAU,CAAC,MAAM,GAAG,KAAK,CAAC;QAC1B,UAAU,CAAC,aAAa,CAAC,IAAI,CAC5B,2BAA2B,eAAe,EAAE,CAC5C,CAAC;IACH,CAAC;IAED,OAAO,UAAU,CAAC;AACnB,CAAC","sourcesContent":["import type { Segment } from '../../types/model/Segment.js';\nimport type { Validation } from '../../types/Validation.js';\n\n/**\n * Validate a segment.\n *\n * Validations:\n * - segment has duration\n * - segment has url\n *\n * @param segment - Segment from cmaf ham model\n * @param trackId - Optional: parent track id\n * @param prevValidation - Optional: validation object from parent previous validate method call\n * @returns Validation\n *\n * @group CMAF\n * @alpha\n */\nexport function validateSegment(\n\tsegment: Segment,\n\ttrackId?: string,\n\tprevValidation?: Validation,\n): Validation {\n\tconst validation: Validation = prevValidation ?? {\n\t\tstatus: true,\n\t\terrorMessages: [],\n\t};\n\tconst moreInformation = trackId\n\t\t? ` in the track with id = ${trackId}`\n\t\t: '.';\n\n\tif (!segment.duration) {\n\t\tvalidation.status = false;\n\t\tvalidation.errorMessages.push(\n\t\t\t`Segment duration is undefined${moreInformation}`,\n\t\t);\n\t}\n\n\tif (!segment.url) {\n\t\tvalidation.status = false;\n\t\tvalidation.errorMessages.push(\n\t\t\t`Segment url is undefined${moreInformation}`,\n\t\t);\n\t}\n\n\treturn validation;\n}\n"]}