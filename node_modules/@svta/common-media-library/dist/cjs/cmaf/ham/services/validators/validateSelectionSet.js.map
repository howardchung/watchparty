{"version":3,"file":"validateSelectionSet.js","sourceRoot":"","sources":["../../../../../../src/cmaf/ham/services/validators/validateSelectionSet.ts"],"names":[],"mappings":";;AAkCA,oDA2BC;AA1DD,yEAAmE;AAGnE;;;;;;;;;;;;;;;;;;;;;;;;;;;GA2BG;AACH,SAAgB,oBAAoB,CACnC,YAA0B,EAC1B,cAAuB,EACvB,cAA2B;IAE3B,MAAM,UAAU,GAAe,cAAc,aAAd,cAAc,cAAd,cAAc,GAAI;QAChD,MAAM,EAAE,IAAI;QACZ,aAAa,EAAE,EAAE;KACjB,CAAC;IACF,MAAM,eAAe,GAAG,cAAc;QACrC,CAAC,CAAC,kCAAkC,cAAc,EAAE;QACpD,CAAC,CAAC,GAAG,CAAC;IAEP,IAAI,CAAC,YAAY,CAAC,EAAE,EAAE,CAAC;QACtB,UAAU,CAAC,MAAM,GAAG,KAAK,CAAC;QAC1B,UAAU,CAAC,aAAa,CAAC,IAAI,CAC5B,+BAA+B,eAAe,EAAE,CAChD,CAAC;IACH,CAAC;IAED,IAAA,gDAAqB,EACpB,YAAY,CAAC,aAAa,EAC1B,YAAY,CAAC,EAAE,EACf,UAAU,CACV,CAAC;IAEF,OAAO,UAAU,CAAC;AACnB,CAAC","sourcesContent":["import type { SelectionSet } from '../../types/model/SelectionSet.js';\nimport type { Validation } from '../../types/Validation.js';\n\nimport { validateSwitchingSets } from './validateSwitchingSets.js';\n\n\n/**\n * Validate a selection set.\n * It validates in cascade, calling each child validation method.\n *\n * Validations:\n * - SelectionSet has id\n *\n * @example\n * ```ts\n * import cmaf, { SelectionSet } from '@svta/common-media-library/cmaf-ham';\n * ...\n *\n * // const selectionSet: SelectionSet = ...;\n *\n * const validation = cmaf.validateSelectionSet(selectionSet);\n * ```\n *\n * Example output: `{ status: true|false, errorMessages: [...] }`\n *\n * @param selectionSet - SelectionSet from cmaf ham model\n * @param presentationId - Optional: parent presentation id\n * @param prevValidation - Optional: validation object from parent previous validate method call\n * @returns Validation\n *\n * @group CMAF\n * @alpha\n *\n */\nexport function validateSelectionSet(\n\tselectionSet: SelectionSet,\n\tpresentationId?: string,\n\tprevValidation?: Validation,\n): Validation {\n\tconst validation: Validation = prevValidation ?? {\n\t\tstatus: true,\n\t\terrorMessages: [],\n\t};\n\tconst moreInformation = presentationId\n\t\t? ` in the presentation with id = ${presentationId}`\n\t\t: '.';\n\n\tif (!selectionSet.id) {\n\t\tvalidation.status = false;\n\t\tvalidation.errorMessages.push(\n\t\t\t`SelectionSet id is undefined${moreInformation}`,\n\t\t);\n\t}\n\n\tvalidateSwitchingSets(\n\t\tselectionSet.switchingSets,\n\t\tselectionSet.id,\n\t\tvalidation,\n\t);\n\n\treturn validation;\n}\n"]}