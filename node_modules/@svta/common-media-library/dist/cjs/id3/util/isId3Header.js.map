{"version":3,"file":"isId3Header.js","sourceRoot":"","sources":["../../../../src/id3/util/isId3Header.ts"],"names":[],"mappings":";;AAYA,kCAoCC;AAhDD;;;;;;;;;;;GAWG;AACH,SAAgB,WAAW,CAAC,IAAgB,EAAE,MAAc;IAC3D;;;;;;;;;;;;OAYG;IACH,IAAI,MAAM,GAAG,EAAE,IAAI,IAAI,CAAC,MAAM,EAAE,CAAC;QAChC,4BAA4B;QAC5B,IACC,IAAI,CAAC,MAAM,CAAC,KAAK,IAAI;YACrB,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,KAAK,IAAI;YACzB,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,KAAK,IAAI,EACxB,CAAC;YACF,gCAAgC;YAChC,IAAI,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,IAAI,IAAI,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,IAAI,EAAE,CAAC;gBACxD,6BAA6B;gBAC7B,IACC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,IAAI;oBACvB,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,IAAI;oBACvB,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,IAAI;oBACvB,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,IAAI,EACtB,CAAC;oBACF,OAAO,IAAI,CAAC;gBACb,CAAC;YACF,CAAC;QACF,CAAC;IACF,CAAC;IACD,OAAO,KAAK,CAAC;AACd,CAAC","sourcesContent":["/**\n * Returns true if an ID3 header can be found at offset in data\n *\n * @param data - The data to search in\n * @param offset - The offset at which to start searching\n *\n * @returns `true` if an ID3 header is found\n *\n * @internal\n *\n * @group ID3\n */\nexport function isId3Header(data: Uint8Array, offset: number): boolean {\n\t/*\n\t * http://id3.org/id3v2.3.0\n\t * [0]     = 'I'\n\t * [1]     = 'D'\n\t * [2]     = '3'\n\t * [3,4]   = {Version}\n\t * [5]     = {Flags}\n\t * [6-9]   = {ID3 Size}\n\t *\n\t * An ID3v2 tag can be detected with the following pattern:\n\t *  $49 44 33 yy yy xx zz zz zz zz\n\t * Where yy is less than $FF, xx is the 'flags' byte and zz is less than $80\n\t */\n\tif (offset + 10 <= data.length) {\n\t\t// look for 'ID3' identifier\n\t\tif (\n\t\t\tdata[offset] === 0x49 &&\n\t\t\tdata[offset + 1] === 0x44 &&\n\t\t\tdata[offset + 2] === 0x33\n\t\t) {\n\t\t\t// check version is within range\n\t\t\tif (data[offset + 3] < 0xff && data[offset + 4] < 0xff) {\n\t\t\t\t// check size is within range\n\t\t\t\tif (\n\t\t\t\t\tdata[offset + 6] < 0x80 &&\n\t\t\t\t\tdata[offset + 7] < 0x80 &&\n\t\t\t\t\tdata[offset + 8] < 0x80 &&\n\t\t\t\t\tdata[offset + 9] < 0x80\n\t\t\t\t) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn false;\n}\n"]}