{"version":3,"file":"Settings.js","sourceRoot":"","sources":["../../../../src/webvtt/parse/Settings.ts"],"names":[],"mappings":";;;AAIA,iFAAiF;AACjF,gCAAgC;AAChC,MAAa,QAAQ;IAGpB;QACC,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;IACnC,CAAC;IAED,+CAA+C;IAC/C,GAAG,CAAC,CAAS,EAAE,CAAgB;QAC9B,IAAI,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,EAAE,EAAE,CAAC;YAC7B,OAAO;QACR,CAAC;QAED,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;IACpB,CAAC;IAED,kDAAkD;IAClD,wEAAwE;IACxE,0EAA0E;IAC1E,4EAA4E;IAC5E,kBAAkB;IAClB,GAAG,CAAoB,CAAS,EAAE,IAAQ;QACzC,IAAI,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC;YACjB,OAAO,IAAI,CAAC,MAAM,CAAC,CAAC,CAAM,CAAC;QAC5B,CAAC;QAED,OAAO,IAAS,CAAC;IAClB,CAAC;IAED,2CAA2C;IAC3C,GAAG,CAAC,CAAS;QACZ,OAAO,CAAC,IAAI,IAAI,CAAC,MAAM,CAAC;IACzB,CAAC;IAED,yDAAyD;IACzD,GAAG,CAAC,CAAS,EAAE,CAAS,EAAE,CAAW;QACpC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,EAAE,CAAC,EAAE,CAAC;YACnC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;gBAChB,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;gBACf,MAAM;YACP,CAAC;QACF,CAAC;IACF,CAAC;IAED,oDAAoD;IACpD,OAAO,CAAC,CAAS,EAAE,CAAS;QAC3B,IAAI,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,UAAU;YAClC,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;QAC9B,CAAC;IACF,CAAC;IAED,8CAA8C;IAC9C,OAAO,CAAC,CAAS,EAAE,CAAS;QAC3B,IAAI,CAAC,CAAC,KAAK,CAAC,0BAA0B,CAAC,EAAE,CAAC;YACzC,MAAM,KAAK,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC;YAC5B,IAAI,KAAK,IAAI,CAAC,IAAI,KAAK,IAAI,GAAG,EAAE,CAAC;gBAChC,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC;gBACnB,OAAO,IAAI,CAAC;YACb,CAAC;QACF,CAAC;QAED,OAAO,KAAK,CAAC;IACd,CAAC;CACD;AA/DD,4BA+DC","sourcesContent":["import type { WebVttRegion } from '../WebVttRegion.js';\n\nexport type SettingsValue = WebVttRegion | string | number | boolean | null;\n\n// A settings object holds key/value pairs and will ignore anything but the first\n// assignment to a specific key.\nexport class Settings {\n\tprivate values: Record<string, SettingsValue>;\n\n\tconstructor() {\n\t\tthis.values = Object.create(null);\n\t}\n\n\t// Only accept the first assignment to any key.\n\tset(k: string, v: SettingsValue): void {\n\t\tif (this.get(k) || v === '') {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.values[k] = v;\n\t}\n\n\t// Return the value for a key, or a default value.\n\t// If 'defaultKey' is passed then 'dflt' is assumed to be an object with\n\t// a number of possible default values as properties where 'defaultKey' is\n\t// the key of the property that will be chosen; otherwise it's assumed to be\n\t// a single value.\n\tget<T = SettingsValue>(k: string, dflt?: T): T {\n\t\tif (this.has(k)) {\n\t\t\treturn this.values[k] as T;\n\t\t}\n\n\t\treturn dflt as T;\n\t}\n\n\t// Check whether we have a value for a key.\n\thas(k: string): boolean {\n\t\treturn k in this.values;\n\t}\n\n\t// Accept a setting if its one of the given alternatives.\n\talt(k: string, v: string, a: string[]): void {\n\t\tfor (let n = 0; n < a.length; ++n) {\n\t\t\tif (v === a[n]) {\n\t\t\t\tthis.set(k, v);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Accept a setting if its a valid (signed) integer.\n\tinteger(k: string, v: string): void {\n\t\tif (/^-?\\d+$/.test(v)) { // integer\n\t\t\tthis.set(k, parseInt(v, 10));\n\t\t}\n\t}\n\n\t// Accept a setting if its a valid percentage.\n\tpercent(k: string, v: string): boolean {\n\t\tif (v.match(/^([\\d]{1,3})(\\.[\\d]*)?%$/)) {\n\t\t\tconst value = parseFloat(v);\n\t\t\tif (value >= 0 && value <= 100) {\n\t\t\t\tthis.set(k, value);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n}\n"]}