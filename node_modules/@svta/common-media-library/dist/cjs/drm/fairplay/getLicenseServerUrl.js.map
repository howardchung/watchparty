{"version":3,"file":"getLicenseServerUrl.js","sourceRoot":"","sources":["../../../../src/drm/fairplay/getLicenseServerUrl.ts"],"names":[],"mappings":";AAAA;;;;;;;;;;;GAWG;;AAEH,kDAUC;AAVD,SAAgB,mBAAmB,CAAC,QAAqB;IACxD,IAAI,cAAc,GAAG,EAAE,CAAC;IACxB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;QAC1C,IAAI,QAAQ,CAAC,CAAC,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC,yBAAyB;YACjD,cAAc,IAAI,MAAM,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;QACpD,CAAC;IACF,CAAC;IAED,MAAM,KAAK,GAAG,cAAc,CAAC,KAAK,CAAC,mBAAmB,CAAC,CAAC;IACxD,OAAO,KAAK,CAAC,CAAC,CAAC,WAAW,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC;AAC3C,CAAC","sourcesContent":["/**\n * Retrieves the FairPlay license server URL from InitData.\n *\n * @param initData - The initialization data (PSSH box)\n * @returns The license server URL as a string\n *\n * @group DRM\n * @beta\n * \n * @example\n * {@includeCode ../../../test/drm/fairplay/getLicenseServerUrl.test.ts#example}\n */\n\nexport function getLicenseServerUrl(initData: Uint16Array): string {\n\tlet initDataString = '';\n\tfor (let i = 0; i < initData.length; i++) {\n\t\tif (initData[i] !== 0) { // Ignore null characters\n\t\t\tinitDataString += String.fromCharCode(initData[i]);\n\t\t}\n\t}\n\n\tconst match = initDataString.match(/skd:\\/\\/([^\"\\s]+)/);\n\treturn match ? `https://${match[1]}` : '';\n}\n"]}