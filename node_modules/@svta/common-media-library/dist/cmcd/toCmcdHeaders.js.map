{"version":3,"file":"toCmcdHeaders.js","sourceRoot":"","sources":["../../src/cmcd/toCmcdHeaders.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,YAAY,EAAE,MAAM,oCAAoC,CAAC;AAIlE,OAAO,EAAE,gBAAgB,EAAE,MAAM,uBAAuB,CAAC;AACzD,OAAO,EAAE,eAAe,EAAE,MAAM,sBAAsB,CAAC;AAEvD;;;;;;;;;;;;;;GAcG;AACH,MAAM,UAAU,aAAa,CAAC,IAAc,EAAE,UAA6B,EAAE;IAC5E,MAAM,MAAM,GAAG,EAAqC,CAAC;IAErD,IAAI,CAAC,IAAI,EAAE,CAAC;QACX,OAAO,MAAM,CAAC;IACf,CAAC;IAED,MAAM,IAAI,GAAG,eAAe,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;IAC5C,MAAM,MAAM,GAAG,gBAAgB,CAAC,IAAI,EAAE,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,eAAe,CAAC,CAAC;IAEhE,OAAO,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC;SAC3B,MAAM,CAAC,CAAC,GAAG,EAAE,CAAC,KAAK,EAAE,KAAK,CAAC,EAAE,EAAE;QAC/B,MAAM,KAAK,GAAG,YAAY,CAAC,KAAK,EAAE,EAAE,UAAU,EAAE,KAAK,EAAE,CAAC,CAAC;QACzD,IAAI,KAAK,EAAE,CAAC;YACX,GAAG,CAAC,KAAwB,CAAC,GAAG,KAAK,CAAC;QACvC,CAAC;QACD,OAAO,GAAG,CAAC;IACZ,CAAC,EAAE,MAAM,CAAC,CAAC;AACb,CAAC","sourcesContent":["import { encodeSfDict } from '../structuredfield/encodeSfDict.js';\nimport type { CmcdData } from './CmcdData.js';\nimport type { CmcdEncodeOptions } from './CmcdEncodeOptions.js';\nimport type { CmcdHeaderField } from './CmcdHeaderField.js';\nimport { groupCmcdHeaders } from './groupCmcdHeaders.js';\nimport { prepareCmcdData } from './prepareCmcdData.js';\n\n/**\n * Convert a CMCD data object to request headers\n *\n * @param cmcd - The CMCD data object to convert.\n * @param options - Options for encoding the CMCD object.\n *\n * @returns The CMCD header shards.\n *\n * @group CMCD\n *\n * @beta\n *\n * @example\n * {@includeCode ../../test/cmcd/toCmcdHeaders.test.ts#example}\n */\nexport function toCmcdHeaders(cmcd: CmcdData, options: CmcdEncodeOptions = {}): Record<CmcdHeaderField, string> {\n\tconst result = {} as Record<CmcdHeaderField, string>;\n\n\tif (!cmcd) {\n\t\treturn result;\n\t}\n\n\tconst data = prepareCmcdData(cmcd, options);\n\tconst shards = groupCmcdHeaders(data, options?.customHeaderMap);\n\n\treturn Object.entries(shards)\n\t\t.reduce((acc, [field, value]) => {\n\t\t\tconst shard = encodeSfDict(value, { whitespace: false });\n\t\t\tif (shard) {\n\t\t\t\tacc[field as CmcdHeaderField] = shard;\n\t\t\t}\n\t\t\treturn acc;\n\t\t}, result);\n}\n"]}