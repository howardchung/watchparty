{"version":3,"file":"getLegacyKeySystemAccess.js","sourceRoot":"","sources":["../../../src/drm/keysystem/getLegacyKeySystemAccess.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,iCAAiC,EAAE,MAAM,wCAAwC,CAAC;AAC3F,OAAO,EAAE,kCAAkC,EAAE,MAAM,yCAAyC,CAAC;AAE7F;;;;;;;;GAQG;AACH,MAAM,UAAU,wBAAwB,CACvC,QAAuC;IAEvC,KAAK,MAAM,EAAE,SAAS,EAAE,cAAc,EAAE,IAAI,QAAQ,EAAE,CAAC;QACtD,MAAM,eAAe,GAAG,kCAAkC,CAAC,SAAS,EAAE,cAAc,CAAC,CAAC;QACtF,IAAI,eAAe,EAAE,CAAC;YACrB,MAAM,aAAa,GAAG,iCAAiC,CACtD,eAAe,CAAC,cAAc,EAC9B,eAAe,CAAC,cAAc,CAC9B,CAAC;YAEF,OAAO;gBACN,SAAS;gBACT,cAAc,EAAE,CAAC,aAAa,CAAC;aAC/B,CAAC;QACH,CAAC;IACF,CAAC;IACD,OAAO,IAAI,CAAC;AACb,CAAC","sourcesContent":["import type { MediaKeySystemAccessRequest } from '../common/MediaKeySystemAccessRequest.js';\nimport { createMediaKeySystemConfiguration } from './createMediaKeySystemConfiguration.js';\nimport { getSupportedKeySystemConfiguration } from './getSupportedKeySystemConfiguration.js';\n\n/**\n * Fallback method to get key system access using legacy MediaKeys.isTypeSupported().\n *\n * @param requests - An array of key system access requests.\n * @returns A KeySystemAccess object if successful, or null if no system is supported.\n *\n * @group DRM\n * @beta\n */\nexport function getLegacyKeySystemAccess(\n\trequests: MediaKeySystemAccessRequest[],\n): MediaKeySystemAccessRequest | null {\n\tfor (const { keySystem, configurations } of requests) {\n\t\tconst supportedConfig = getSupportedKeySystemConfiguration(keySystem, configurations);\n\t\tif (supportedConfig) {\n\t\t\tconst configuration = createMediaKeySystemConfiguration(\n\t\t\t\tsupportedConfig.supportedAudio,\n\t\t\t\tsupportedConfig.supportedVideo,\n\t\t\t);\n\n\t\t\treturn {\n\t\t\t\tkeySystem,\n\t\t\t\tconfigurations: [configuration],\n\t\t\t};\n\t\t}\n\t}\n\treturn null;\n}\n"]}