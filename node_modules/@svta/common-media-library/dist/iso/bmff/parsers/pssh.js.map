{"version":3,"file":"pssh.js","sourceRoot":"","sources":["../../../../src/iso/bmff/parsers/pssh.ts"],"names":[],"mappings":"AAEA,OAAO,EAAE,IAAI,EAAE,MAAM,mBAAmB,CAAC;AAGzC;;;;;;;;;;GAUG;AACH,MAAM,UAAU,IAAI,CAAC,IAAa;IACjC,MAAM,EAAE,QAAQ,EAAE,SAAS,EAAE,GAAG,IAAI,CAAC;IACrC,MAAM,EAAE,OAAO,EAAE,KAAK,EAAE,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;IAE9C,MAAM,QAAQ,GAAG,SAAS,CAAC,IAAI,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC;IAExC,IAAI,QAAQ,GAAW,CAAC,CAAC;IACzB,IAAI,GAAG,GAAa,EAAE,CAAC;IAEvB,IAAI,OAAO,GAAG,CAAC,EAAE,CAAC;QACjB,QAAQ,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC;QACvB,GAAG,GAAG,SAAS,CAAC,IAAI,EAAE,CAAC,EAAE,QAAQ,CAAC,CAAC;IACpC,CAAC;IAED,MAAM,QAAQ,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC;IAC7B,MAAM,IAAI,GAAG,SAAS,CAAC,IAAI,EAAE,CAAC,EAAE,QAAQ,CAAC,CAAC;IAE1C,OAAO;QACN,OAAO;QACP,KAAK;QACL,QAAQ;QACR,QAAQ;QACR,GAAG;QACH,QAAQ;QACR,IAAI;KACJ,CAAC;AACH,CAAC;AAAA,CAAC","sourcesContent":["import type { Fields } from '../boxes/Fields.js';\nimport type { ProtectionSystemSpecificHeaderBox } from '../boxes/ProtectionSystemSpecificHeaderBox.js';\nimport { UINT } from '../fields/UINT.js';\nimport type { IsoView } from '../IsoView.js';\n\n/**\n * Parse a ProtectionSystemSpecificHeaderBox from an IsoView\n *\n * @param view - The IsoView to read data from\n *\n * @returns A parsed ProtectionSystemSpecificHeaderBox\n *\n * @group ISOBMFF\n *\n * @beta\n */\nexport function pssh(view: IsoView): Fields<ProtectionSystemSpecificHeaderBox> {\n\tconst { readUint, readArray } = view;\n\tconst { version, flags } = view.readFullBox();\n\n\tconst systemId = readArray(UINT, 1, 16);\n\n\tlet kidCount: number = 0;\n\tlet kid: number[] = [];\n\n\tif (version > 0) {\n\t\tkidCount = readUint(4);\n\t\tkid = readArray(UINT, 1, kidCount);\n\t}\n\n\tconst dataSize = readUint(4);\n\tconst data = readArray(UINT, 1, dataSize);\n\n\treturn {\n\t\tversion,\n\t\tflags,\n\t\tsystemId,\n\t\tkidCount,\n\t\tkid,\n\t\tdataSize,\n\t\tdata,\n\t};\n};\n"]}