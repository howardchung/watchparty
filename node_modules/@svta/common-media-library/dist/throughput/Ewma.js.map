{"version":3,"file":"Ewma.js","sourceRoot":"","sources":["../../src/throughput/Ewma.ts"],"names":[],"mappings":"AAAA;;;;;;GAMG;AACH,MAAM,OAAO,IAAI;IAQhB,YAAY,KAAa;QACxB,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QACnB,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;QAClB,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC;IACxB,CAAC;IAED;;OAEG;IACI,MAAM,CAAC,MAAc,EAAE,KAAa;QAC1C,MAAM,aAAa,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;QACnD,IAAI,CAAC,QAAQ,GAAG,aAAa,GAAG,KAAK,GAAG,CAAC,CAAC,GAAG,aAAa,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC;QAC5E,IAAI,CAAC,aAAa,IAAI,MAAM,CAAC;IAC9B,CAAC;IAED;;;;;OAKG;IACI,WAAW;QACjB,MAAM,UAAU,GAAG,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;QAChE,OAAO,IAAI,CAAC,QAAQ,GAAG,UAAU,CAAC;IACnC,CAAC;IAED;;OAEG;IACI,gBAAgB;QACtB,OAAO,IAAI,CAAC,aAAa,CAAC;IAC3B,CAAC;CACD","sourcesContent":["/**\n * Exponential Weighted Moving Average (EWMA)\n *\n * @group Throughput\n *\n * @beta\n */\nexport class Ewma {\n\t// The smoothing factor for the EWMA\n\tprivate alpha: number;\n\t// The current estimate of the throughput (in bits per second)\n\tprivate estimate: number;\n\t// The total duration of the resource (in seconds)\n\tprivate totalDuration: number;\n\n\tconstructor(alpha: number) {\n\t\tthis.alpha = alpha;\n\t\tthis.estimate = 0;\n\t\tthis.totalDuration = 0;\n\t}\n\n\t/**\n\t * Samples the value of the resource and updates the estimate.\n\t */\n\tpublic sample(weight: number, value: number): void {\n\t\tconst adjustedAlpha = Math.pow(this.alpha, weight);\n\t\tthis.estimate = adjustedAlpha * value + (1 - adjustedAlpha) * this.estimate;\n\t\tthis.totalDuration += weight;\n\t}\n\n\t/**\n\t * Returns the estimate of the value (in units, as `value` during sampling)\n\t *\n\t * For example, if the value is throughput (in bits per seconds), the estimate\n\t * will also be in bits per seconds.\n\t */\n\tpublic getEstimate(): number {\n\t\tconst zeroFactor = 1 - Math.pow(this.alpha, this.totalDuration);\n\t\treturn this.estimate / zeroFactor;\n\t}\n\n\t/**\n\t * Returns the total duration of the resource (in units, as `weight` during sampling)\n\t */\n\tpublic getTotalDuration(): number {\n\t\treturn this.totalDuration;\n\t}\n}\n"]}